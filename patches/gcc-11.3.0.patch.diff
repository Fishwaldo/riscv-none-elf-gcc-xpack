From a6e5c3e6959d56f1506fb6e28b6e1ce5d8b8ccf2 Mon Sep 17 00:00:00 2001
From: Liviu Ionescu <ilg@livius.net>
Date: Mon, 25 Apr 2022 15:48:09 +0300
Subject: [PATCH] add support for riscv-none-embed-*

---
 config.sub     | 3 +++
 gcc/config.gcc | 3 ++-
 2 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/config.sub b/config.sub
index 63c1f1c8b5e..412c83f07c0 100755
--- a/config.sub
+++ b/config.sub
@@ -1727,6 +1727,9 @@ case $os in
 	     | midnightbsd* | amdhsa* | unleashed* | emscripten* | wasi* \
 	     | nsk* | powerunix* | genode* | zvmoe* | qnx* | emx*)
 		;;
+	# xPack GNU RISC-V Embed GCC uses riscv-none-embed-*.
+	embed)
+		;;
 	# This one is extra strict with allowed versions
 	sco3.2v2 | sco3.2v[4-9]* | sco5v6*)
 		# Don't forget version if it is 3.2v4 or newer.
diff --git a/gcc/config.gcc b/gcc/config.gcc
index 5636acc2270..e2bcd557b51 100644
--- a/gcc/config.gcc
+++ b/gcc/config.gcc
@@ -2487,7 +2487,8 @@ riscv*-*-linux*)
 	# automatically detect that GAS supports it, yet we require it.
 	gcc_cv_initfini_array=yes
 	;;
-riscv*-*-elf* | riscv*-*-rtems*)
+# xPack GNU RISC-V Embed GCC.
+riscv*-*-elf* | riscv*-*-rtems* | riscv-none-embed)
 	tm_file="elfos.h newlib-stdint.h ${tm_file} riscv/elf.h"
 	case ${target} in
 	*-*-rtems*)
-- 
2.31.1

